databaseChangeLog:
- changeSet:
    id: est-init-table-1
    author: limit
    changes:
    - createTable:
        tableName: ${db_prefix}est_dimensio
        columns:
            - column:
                name: id
                type: bigint
                autoIncrement: true
                constraints:
                    primaryKey: true
                    nullable: false
                    primaryKeyName: ${db_prefix}est_dimensio_pk
            - column:
                name: codi
                type: varchar(16 ${varcharUnit})
                constraints:
                    nullable: false
            - column:
                name: nom
                type: varchar(64 ${varcharUnit})
                constraints:
                    nullable: false
            - column:
                name: descripcio
                type: varchar(1024 ${varcharUnit})
            - column:
                name: entorn_app_id
                type: bigint
                constraints:
                    nullable: false
- changeSet:
    id: est-init-table-2
    author: limit
    changes:
    - createTable:
        tableName: ${db_prefix}est_dimensio_valor
        columns:
            - column:
                name: id
                type: bigint
                autoIncrement: true
                constraints:
                    primaryKey: true
                    nullable: false
                    primaryKeyName: ${db_prefix}est_dimensio_valor_pk
            - column:
                name: valor
                type: varchar(255 ${varcharUnit})
            - column:
                name: dimensio_id
                type: bigint
                constraints:
                    nullable: false
- changeSet:
    id: est-init-table-3
    author: limit
    changes:
    - createTable:
        tableName: ${db_prefix}est_indicador
        columns:
            - column:
                name: id
                type: bigint
                autoIncrement: true
                constraints:
                    primaryKey: true
                    nullable: false
                    primaryKeyName: ${db_prefix}est_indicador_pk
            - column:
                name: codi
                type: varchar(16 ${varcharUnit})
                constraints:
                    nullable: false
            - column:
                name: nom
                type: varchar(64 ${varcharUnit})
                constraints:
                    nullable: false
            - column:
                name: descripcio
                type: varchar(1024 ${varcharUnit})
            - column:
                name: entorn_app_id
                type: bigint
                constraints:
                    nullable: false
            - column:
                name: format
                type: varchar(64 ${varcharUnit})
- changeSet:
    id: est-init-table-4
    author: limit
    changes:
    - createTable:
        tableName: ${db_prefix}est_temps
        columns:
            - column:
                name: id
                type: bigint
                autoIncrement: true
                constraints:
                    primaryKey: true
                    nullable: false
                    primaryKeyName: ${db_prefix}est_temps_pk
            - column:
                name: data
                type: date
                constraints:
                    nullable: false
            - column:
                name: anualitat
                type: int
                constraints:
                    nullable: false
            - column:
                name: trimestre
                type: int
                constraints:
                    nullable: false
            - column:
                name: mes
                type: int
                constraints:
                    nullable: false
            - column:
                name: setmana
                type: int
                constraints:
                    nullable: false
            - column:
                name: dia
                type: int
                constraints:
                    nullable: false
            - column:
                name: diaSetmana
                type: varchar(2 ${varcharUnit})
                constraints:
                    nullable: false
- changeSet:
    id: est-init-table-5
    author: limit
    changes:
    - createTable:
        tableName: ${db_prefix}est_fet
        columns:
            - column:
                name: id
                type: bigint
                autoIncrement: true
                constraints:
                    primaryKey: true
                    nullable: false
                    primaryKeyName: ${db_prefix}est_fet_pk
            - column:
                name: temps_id
                type: bigint
                constraints:
                    nullable: false
            - column:
                name: dimensions_json
                type: varchar(4000 ${varcharUnit})
            - column:
                name: indicadors_json
                type: varchar(4000 ${varcharUnit})
            - column:
                name: entorn_app_id
                type: bigint
                constraints:
                    nullable: false
- changeSet:
    id: est-init-table-7
    author: limit
    changes:
    - createTable:
        tableName: ${db_prefix}est_widget
        columns:
            - column:
                name: id
                type: bigint
                autoIncrement: true
                constraints:
                    primaryKey: true
                    nullable: false
                    primaryKeyName: ${db_prefix}est_widget_pk
            - column:
                name: widget_type
                type: varchar(16 ${varcharUnit})
                constraints:
                    nullable: false
            - column:
                name: titol
                type: varchar(64 ${varcharUnit})
                constraints:
                    nullable: false
            - column:
                name: descripcio
                type: varchar(1024 ${varcharUnit})
            - column:
                name: app_id
                type: bigint
                constraints:
                    nullable: false
            - column:
                  name: periode_mode
                  type: varchar2(32 ${varcharUnit})
            - column:
                name: preset_periode
                type: varchar2(32 ${varcharUnit})
            - column:
                name: preset_count
                type: number
            - column:
                name: relatiu_punt_referencia
                type: varchar2(32 ${varcharUnit})
            - column:
                name: relatiu_count
                type: number
            - column:
                name: relatiu_unitat
                type: varchar2(32 ${varcharUnit})
            - column:
                name: relatiu_alineacio
                type: varchar2(32 ${varcharUnit})
            - column:
                name: absolut_tipus
                type: varchar2(32 ${varcharUnit})
            - column:
                name: absolut_data_inici
                type: date
            - column:
                name: absolut_data_fi
                type: date
            - column:
                name: absolut_any_referencia
                type: varchar2(32 ${varcharUnit})
            - column:
                name: absolut_any_valor
                type: number
            - column:
                name: absolut_periode_unitat
                type: varchar2(32 ${varcharUnit})
            - column:
                name: absolut_periode_inici
                type: number
            - column:
                name: absolut_periode_fi
                type: number
            - column:
                name: indicador_id
                type: bigint
            - column:
                name: tipus_grafic
                type: varchar(16 ${varcharUnit})
            - column:
                name: tipus_dades
                type: varchar(32 ${varcharUnit})
            - column:
                name: tipus_valors
                type: varchar(16 ${varcharUnit})
            - column:
                name: temps_agrupacio
                type: varchar(16 ${varcharUnit})
            - column:
                name: descomposicio_dimensio_id
                type: BIGINT
            - column:
                name: agrupar_dimensio_descomposicio
                type: BOOLEAN
            - column:
                name: llegenda_x
                type: varchar(64 ${varcharUnit})
            - column:
                name: llegenda_y
                type: varchar(64 ${varcharUnit})
            - column:
                name: unitat
                type: varchar(64 ${varcharUnit})
            - column:
                name: agrupament_dimensio_id
                type: bigint
            - column:
                name: agrupament_dimensio_titol
                type: varchar(64 ${varcharUnit})
            - column:
                name: comparar_periode_anterior
                type: BOOLEAN
                defaultValueBoolean: false
            - column:
                name: atributs_visuals
                type: VARCHAR(4000 ${varcharUnit})
            - column:
                constraints:
                    nullable: false
                name: created_by
                type: VARCHAR(64 ${varcharUnit})
            - column:
                constraints:
                    nullable: false
                name: created_date
                type: TIMESTAMP
            - column:
                name: lastmod_by
                type: VARCHAR(64 ${varcharUnit})
            - column:
                name: lastmod_date
                type: TIMESTAMP
            - column:
                name: v
                type: BIGINT
- changeSet:
    id: est-init-table-8
    author: limit
    changes:
    - createTable:
        tableName: ${db_prefix}est_widget_dim_valor
        columns:
            - column:
                name: widget_id
                type: bigint
                constraints:
                    nullable: false
            - column:
                name: dimensio_valor_id
                type: bigint
                constraints:
                    nullable: false
- changeSet:
    id: est-init-table-9
    author: limit
    changes:
    - createTable:
        tableName: ${db_prefix}est_indicador_table
        columns:
            - column:
                name: id
                type: bigint
                autoIncrement: true
                constraints:
                    primaryKey: true
                    nullable: false
                    primaryKeyName: ${db_prefix}est_indicador_table_pk
            - column:
                name: indicador_id
                type: bigint
                constraints:
                    nullable: false
            - column:
                name: widget_id
                type: bigint
                constraints:
                    nullable: false
            - column:
                name: agregacio
                type: varchar(16 ${varcharUnit})
            - column:
                name: unitat_agregacio
                type: varchar(16 ${varcharUnit})
            - column:
                name: titol
                type: varchar(64 ${varcharUnit})
            - column:
                constraints:
                    nullable: false
                name: created_by
                type: VARCHAR(64 ${varcharUnit})
            - column:
                constraints:
                    nullable: false
                name: created_date
                type: TIMESTAMP
            - column:
                name: lastmod_by
                type: VARCHAR(64 ${varcharUnit})
            - column:
                name: lastmod_date
                type: TIMESTAMP
            - column:
                name: v
                type: BIGINT
- changeSet:
    id: est-init-table-10
    author: limit
    changes:
    - createTable:
        tableName: ${db_prefix}est_dashboard
        columns:
            - column:
                name: id
                type: bigint
                autoIncrement: true
                constraints:
                    primaryKey: true
                    nullable: false
                    primaryKeyName: ${db_prefix}est_dashboard_pk
            - column:
                name: titol
                type: varchar(64 ${varcharUnit})
                constraints:
                    nullable: false
            - column:
                name: descripcio
                type: varchar(1024 ${varcharUnit})
            - column:
                constraints:
                    nullable: false
                name: created_by
                type: VARCHAR(64 ${varcharUnit})
            - column:
                constraints:
                    nullable: false
                name: created_date
                type: TIMESTAMP
            - column:
                name: lastmod_by
                type: VARCHAR(64 ${varcharUnit})
            - column:
                name: lastmod_date
                type: TIMESTAMP
            - column:
                name: v
                type: BIGINT
- changeSet:
    id: est-init-table-11
    author: limit
    changes:
    - createTable:
        tableName: ${db_prefix}est_dashboard_item
        columns:
            - column:
                name: id
                type: bigint
                autoIncrement: true
                constraints:
                    primaryKey: true
                    nullable: false
                    primaryKeyName: ${db_prefix}est_dashboard_item_pk
            - column:
                name: pos_x
                type: int
                constraints:
                    nullable: false
            - column:
                name: pos_y
                type: int
                constraints:
                    nullable: false
            - column:
                name: width
                type: int
                constraints:
                    nullable: false
            - column:
                name: height
                type: int
                constraints:
                    nullable: false
            - column:
                name: dashboard_id
                type: bigint
                constraints:
                    nullable: false
            - column:
                name: widget_id
                type: bigint
                constraints:
                    nullable: false
            - column:
                name: entorn_id
                type: bigint
                constraints:
                    nullable: false
            - column:
                name: atributs_visuals
                type: VARCHAR(4000 ${varcharUnit})
            - column:
                constraints:
                    nullable: false
                name: created_by
                type: VARCHAR(64 ${varcharUnit})
            - column:
                constraints:
                    nullable: false
                name: created_date
                type: TIMESTAMP
            - column:
                name: lastmod_by
                type: VARCHAR(64 ${varcharUnit})
            - column:
                name: lastmod_date
                type: TIMESTAMP
            - column:
                name: v
                type: BIGINT
- changeSet:
    id: est-init-table-12
    author: limit
    changes:
    - createTable:
        tableName: ${db_prefix}est_dashboard_titol
        columns:
            - column:
                name: id
                type: BIGINT
                autoIncrement: true
                constraints:
                    primaryKey: true
                    nullable: false
                    primaryKeyName: ${db_prefix}est_dashboard_titol_pk
            - column:
                name: dashboard_id
                type: BIGINT
                constraints:
                    nullable: false
            - column:
                name: titol
                type: VARCHAR(255 ${varcharUnit})
                constraints:
                    nullable: false
            - column:
                name: subtitol
                type: VARCHAR(255 ${varcharUnit})
            - column:
                name: pos_x
                type: INT
                constraints:
                    nullable: false
            - column:
                name: pos_y
                type: INT
                constraints:
                    nullable: false
            - column:
                name: width
                type: INT
                constraints:
                    nullable: false
            - column:
                name: height
                type: INT
                constraints:
                    nullable: false
            - column:
                name: color_titol
                type: VARCHAR(8 ${varcharUnit})
            - column:
                name: mida_font_titol
                type: INT
            - column:
                name: color_subtitol
                type: VARCHAR(8 ${varcharUnit})
            - column:
                name: mida_font_subtitol
                type: INT
            - column:
                name: color_fons
                type: VARCHAR(8 ${varcharUnit})
            - column:
                name: mostrar_vora
                type: BOOLEAN
            - column:
                name: color_vora
                type: VARCHAR(8 ${varcharUnit})
            - column:
                name: ample_vora
                type: INT
            - column:
                name: created_by
                type: VARCHAR(50 ${varcharUnit})
            - column:
                name: created_date
                type: TIMESTAMP
                constraints:
                    nullable: false
            - column:
                name: lastmod_by
                type: VARCHAR(50 ${varcharUnit})
            - column:
                name: lastmod_date
                type: TIMESTAMP
            - column:
                name: v
                type: BIGINT
