package es.caib.comanda.ms.salut.helper;

import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.datatype.jsr310.JavaTimeModule;
import es.caib.comanda.model.v1.salut.EstatSalutEnum;
import es.caib.comanda.model.v1.salut.SalutInfo;
import org.junit.jupiter.api.Test;

import static org.junit.jupiter.api.Assertions.assertEquals;
import static org.junit.jupiter.api.Assertions.assertNotNull;

public class SalutInfoProvidedJsonTest {

    private final ObjectMapper objectMapper = new ObjectMapper().registerModule(new JavaTimeModule());

    @Test
    public void testDeserializationWithProvidedJson() throws Exception {
        String json = "{\"codi\":\"DIS\",\"data\":\"2025-12-22T13:09:33.820+0000\",\"estat\":{\"estat\":\"UP\",\"latencia\":13},\"bd\":{\"estat\":\"UP\",\"latencia\":0},\"integracions\":[{\"codi\":\"PFI\",\"peticions\":{\"totalOk\":0,\"totalError\":0,\"totalTempsMig\":0,\"peticionsOkUltimPeriode\":0,\"peticionsErrorUltimPeriode\":0,\"tempsMigUltimPeriode\":0,\"peticionsPerEntorn\":{}}},{\"latencia\":0,\"codi\":\"RSC\",\"peticions\":{\"totalOk\":0,\"totalError\":0,\"totalTempsMig\":0,\"peticionsOkUltimPeriode\":0,\"peticionsErrorUltimPeriode\":0,\"tempsMigUltimPeriode\":0,\"peticionsPerEntorn\":{}}},{\"codi\":\"USR\",\"peticions\":{\"totalOk\":0,\"totalError\":0,\"totalTempsMig\":0,\"peticionsOkUltimPeriode\":0,\"peticionsErrorUltimPeriode\":0,\"tempsMigUltimPeriode\":0,\"peticionsPerEntorn\":{}}},{\"estat\":\"UP\",\"latencia\":0,\"codi\":\"GDC\",\"peticions\":{\"totalOk\":20,\"totalError\":0,\"totalTempsMig\":1,\"peticionsOkUltimPeriode\":0,\"peticionsErrorUltimPeriode\":0,\"tempsMigUltimPeriode\":0,\"peticionsPerEntorn\":{}}},{\"codi\":\"ARX\",\"peticions\":{\"totalOk\":0,\"totalError\":0,\"totalTempsMig\":0,\"peticionsOkUltimPeriode\":0,\"peticionsErrorUltimPeriode\":0,\"tempsMigUltimPeriode\":0,\"peticionsPerEntorn\":{}}},{\"estat\":\"DEGRADED\",\"latencia\":0,\"codi\":\"VFI\",\"peticions\":{\"totalOk\":5,\"totalError\":2,\"totalTempsMig\":711,\"peticionsOkUltimPeriode\":0,\"peticionsErrorUltimPeriode\":0,\"tempsMigUltimPeriode\":0,\"peticionsPerEntorn\":{}}},{\"latencia\":0,\"codi\":\"DIR\",\"peticions\":{\"totalOk\":0,\"totalError\":0,\"totalTempsMig\":0,\"peticionsOkUltimPeriode\":0,\"peticionsErrorUltimPeriode\":0,\"tempsMigUltimPeriode\":0,\"peticionsPerEntorn\":{}}},{\"estat\":\"UP\",\"latencia\":0,\"codi\":\"DIS\",\"peticions\":{\"totalOk\":12,\"totalError\":0,\"totalTempsMig\":586,\"peticionsOkUltimPeriode\":0,\"peticionsErrorUltimPeriode\":0,\"tempsMigUltimPeriode\":0,\"peticionsPerEntorn\":{}}}],\"altres\":[{\"codi\":\"PRC\",\"nom\":\"Processadors\",\"valor\":\"4\"},{\"codi\":\"SCPU\",\"nom\":\"Càrrega del sistema\",\"valor\":\"4,14%\"},{\"codi\":\"PCPU\",\"nom\":\"Càrrega del procés\",\"valor\":\"1.0%\"},{\"codi\":\"MED\",\"nom\":\"Memòria disponible\",\"valor\":\"183,0 MB\"},{\"codi\":\"MET\",\"nom\":\"Memòria total\",\"valor\":\"2,1 GB\"},{\"codi\":\"EDT\",\"nom\":\"Espai de disc total\",\"valor\":\"93,1 GB\"},{\"codi\":\"EDL\",\"nom\":\"Espai de disc lliure\",\"valor\":\"37,8 GB\"},{\"codi\":\"SO\",\"nom\":\"Sistema operatiu\",\"valor\":\"Linux 3.10.0-957.10.1.el7.x86_64 (amd64)\"}],\"missatges\":[{\"data\":\"2022-05-24\",\"nivell\":\"WARN\",\"missatge\":\"Els desenvolupaments de tràmits i les proves amb integracions amb backoffices externs s'han de realitzar a partir d'ara en el nou entorn de serveis estables (SE) accesible des de l'adreça <a href=\\\"https://se.caib.es/distribucio/\\\" target=\\\"_blank\\\">https://se.caib.es/distribucio/</a>. Aquest entorn de SE està obert des d'Internet i sempre tindrà la mateixa versió que l'entorn de producció. L'entorn de DEV només estarà disponible pels tècnics de la DGEDDT per testetjar les eines d'administració electrònica.\"}],\"versio\":\"1.0.6\",\"subsistemes\":[{\"estat\":\"UP\",\"latencia\":0,\"codi\":\"AWS\",\"totalOk\":1,\"totalError\":0,\"totalTempsMig\":1215,\"peticionsOkUltimPeriode\":0,\"peticionsErrorUltimPeriode\":0,\"tempsMigUltimPeriode\":0},{\"estat\":\"UNKNOWN\",\"latencia\":0,\"codi\":\"BKC\",\"totalOk\":0,\"totalError\":0,\"totalTempsMig\":0,\"peticionsOkUltimPeriode\":0,\"peticionsErrorUltimPeriode\":0,\"tempsMigUltimPeriode\":0},{\"estat\":\"UNKNOWN\",\"latencia\":0,\"codi\":\"BKE\",\"totalOk\":0,\"totalError\":0,\"totalTempsMig\":0,\"peticionsOkUltimPeriode\":0,\"peticionsErrorUltimPeriode\":0,\"tempsMigUltimPeriode\":0},{\"estat\":\"UNKNOWN\",\"latencia\":0,\"codi\":\"BKL\",\"totalOk\":0,\"totalError\":0,\"totalTempsMig\":0,\"peticionsOkUltimPeriode\":0,\"peticionsErrorUltimPeriode\":0,\"tempsMigUltimPeriode\":0},{\"estat\":\"UNKNOWN\",\"latencia\":0,\"codi\":\"RGB\",\"totalOk\":0,\"totalError\":0,\"totalTempsMig\":0,\"peticionsOkUltimPeriode\":0,\"peticionsErrorUltimPeriode\":0,\"tempsMigUltimPeriode\":0},{\"estat\":\"UP\",\"latencia\":0,\"codi\":\"GDO\",\"totalOk\":15,\"totalError\":0,\"totalTempsMig\":8,\"peticionsOkUltimPeriode\":0,\"peticionsErrorUltimPeriode\":0,\"tempsMigUltimPeriode\":0}]}";

        SalutInfo salutInfo = objectMapper.readValue(json, SalutInfo.class);

        assertNotNull(salutInfo);
        assertEquals("DIS", salutInfo.getCodi());
        assertNotNull(salutInfo.getData());
        assertEquals(2025, salutInfo.getData().getYear());
        assertEquals(12, salutInfo.getData().getMonthValue());
        assertEquals(22, salutInfo.getData().getDayOfMonth());
        assertEquals("1.0.6", salutInfo.getVersio());
        assertNotNull(salutInfo.getEstatGlobal());
        assertEquals(EstatSalutEnum.UP, salutInfo.getEstatGlobal().getEstat());
        assertNotNull(salutInfo.getIntegracions());
        assertEquals(8, salutInfo.getIntegracions().size());
    }

@Test
    public void testDeserializationWithProvidedJsonDistribucio() throws Exception {
        String json = "{\"codi\":\"DIS\",\"data\":\"2025-12-22T13:07:14.884+0000\",\"estat\":{\"estat\":\"UP\",\"latencia\":3},\"bd\":{\"estat\":\"UP\",\"latencia\":0},\"integracions\":[{\"codi\":\"PFI\",\"peticions\":{\"totalOk\":0,\"totalError\":0,\"totalTempsMig\":0,\"peticionsOkUltimPeriode\":0,\"peticionsErrorUltimPeriode\":0,\"tempsMigUltimPeriode\":0,\"peticionsPerEntorn\":{}}},{\"estat\":\"UP\",\"latencia\":0,\"codi\":\"RSC\",\"peticions\":{\"totalOk\":17501,\"totalError\":56,\"totalTempsMig\":33,\"peticionsOkUltimPeriode\":0,\"peticionsErrorUltimPeriode\":0,\"tempsMigUltimPeriode\":0,\"peticionsPerEntorn\":{\"Serveis\":{\"totalOk\":9093,\"totalError\":0,\"totalTempsMig\":31,\"peticionsOkUltimPeriode\":0,\"peticionsErrorUltimPeriode\":0,\"tempsMigUltimPeriode\":0,\"endpoint\":\"https://se.caib.es/rolsac/api/rest/v1/servicios\",\"peticionsPerEntorn\":{}},\"Procediments\":{\"totalOk\":8408,\"totalError\":56,\"totalTempsMig\":33,\"peticionsOkUltimPeriode\":0,\"peticionsErrorUltimPeriode\":0,\"tempsMigUltimPeriode\":0,\"endpoint\":\"https://se.caib.es/rolsac/api/rest/v1/procedimientos\",\"peticionsPerEntorn\":{}}}}},{\"estat\":\"UP\",\"latencia\":0,\"codi\":\"USR\",\"peticions\":{\"totalOk\":2761,\"totalError\":0,\"totalTempsMig\":1,\"peticionsOkUltimPeriode\":0,\"peticionsErrorUltimPeriode\":0,\"tempsMigUltimPeriode\":0,\"peticionsPerEntorn\":{}}},{\"estat\":\"UP\",\"latencia\":0,\"codi\":\"GDC\",\"peticions\":{\"totalOk\":1635,\"totalError\":0,\"totalTempsMig\":0,\"peticionsOkUltimPeriode\":0,\"peticionsErrorUltimPeriode\":0,\"tempsMigUltimPeriode\":0,\"peticionsPerEntorn\":{}}},{\"estat\":\"UP\",\"latencia\":0,\"codi\":\"ARX\",\"peticions\":{\"totalOk\":483,\"totalError\":0,\"totalTempsMig\":160,\"peticionsOkUltimPeriode\":0,\"peticionsErrorUltimPeriode\":0,\"tempsMigUltimPeriode\":0,\"peticionsPerEntorn\":{}}},{\"estat\":\"UP\",\"latencia\":0,\"codi\":\"VFI\",\"peticions\":{\"totalOk\":486,\"totalError\":8,\"totalTempsMig\":533,\"peticionsOkUltimPeriode\":0,\"peticionsErrorUltimPeriode\":0,\"tempsMigUltimPeriode\":0,\"peticionsPerEntorn\":{}}},{\"latencia\":0,\"codi\":\"DIR\",\"peticions\":{\"totalOk\":0,\"totalError\":0,\"totalTempsMig\":0,\"peticionsOkUltimPeriode\":0,\"peticionsErrorUltimPeriode\":0,\"tempsMigUltimPeriode\":0,\"peticionsPerEntorn\":{}}},{\"estat\":\"UP\",\"latencia\":0,\"codi\":\"DIS\",\"peticions\":{\"totalOk\":12468,\"totalError\":10,\"totalTempsMig\":177,\"peticionsOkUltimPeriode\":0,\"peticionsErrorUltimPeriode\":0,\"tempsMigUltimPeriode\":0,\"peticionsPerEntorn\":{}}}],\"altres\":[{\"codi\":\"PRC\",\"nom\":\"Processadors\",\"valor\":\"4\"},{\"codi\":\"SCPU\",\"nom\":\"Càrrega del sistema\",\"valor\":\"15.00%\"},{\"codi\":\"PCPU\",\"nom\":\"Càrrega del procés\",\"valor\":\"0.0%\"},{\"codi\":\"MED\",\"nom\":\"Memòria disponible\",\"valor\":\"3.5 GB\"},{\"codi\":\"MET\",\"nom\":\"Memòria total\",\"valor\":\"6.3 GB\"},{\"codi\":\"EDT\",\"nom\":\"Espai de disc total\",\"valor\":\"53.7 GB\"},{\"codi\":\"EDL\",\"nom\":\"Espai de disc lliure\",\"valor\":\"4.4 GB\"},{\"codi\":\"SO\",\"nom\":\"Sistema operatiu\",\"valor\":\"Linux 4.18.0-348.12.2.el8_5.x86_64 (amd64)\"}],\"missatges\":[],\"versio\":\"1.0.5.3\",\"subsistemes\":[{\"estat\":\"UP\",\"latencia\":0,\"codi\":\"AWS\",\"totalOk\":65,\"totalError\":0,\"totalTempsMig\":165,\"peticionsOkUltimPeriode\":0,\"peticionsErrorUltimPeriode\":0,\"tempsMigUltimPeriode\":0},{\"estat\":\"UP\",\"latencia\":0,\"codi\":\"BKC\",\"totalOk\":9447,\"totalError\":219,\"totalTempsMig\":168,\"peticionsOkUltimPeriode\":0,\"peticionsErrorUltimPeriode\":0,\"tempsMigUltimPeriode\":0},{\"estat\":\"UP\",\"latencia\":0,\"codi\":\"BKE\",\"totalOk\":907,\"totalError\":0,\"totalTempsMig\":14,\"peticionsOkUltimPeriode\":0,\"peticionsErrorUltimPeriode\":0,\"tempsMigUltimPeriode\":0},{\"estat\":\"UNKNOWN\",\"latencia\":0,\"codi\":\"BKL\",\"totalOk\":0,\"totalError\":0,\"totalTempsMig\":0,\"peticionsOkUltimPeriode\":0,\"peticionsErrorUltimPeriode\":0,\"tempsMigUltimPeriode\":0},{\"estat\":\"UP\",\"latencia\":0,\"codi\":\"RGB\",\"totalOk\":40,\"totalError\":1,\"totalTempsMig\":674,\"peticionsOkUltimPeriode\":0,\"peticionsErrorUltimPeriode\":0,\"tempsMigUltimPeriode\":0},{\"estat\":\"UP\",\"latencia\":0,\"codi\":\"GDO\",\"totalOk\":1221,\"totalError\":0,\"totalTempsMig\":0,\"peticionsOkUltimPeriode\":0,\"peticionsErrorUltimPeriode\":0,\"tempsMigUltimPeriode\":0}]}";

        SalutInfo salutInfo = objectMapper.readValue(json, SalutInfo.class);

        assertNotNull(salutInfo);
        assertEquals("DIS", salutInfo.getCodi());
        assertNotNull(salutInfo.getData());
        assertEquals(2025, salutInfo.getData().getYear());
        assertEquals(12, salutInfo.getData().getMonthValue());
        assertEquals(22, salutInfo.getData().getDayOfMonth());
        assertEquals("1.0.5.3", salutInfo.getVersio());
        assertNotNull(salutInfo.getEstatGlobal());
        assertEquals(EstatSalutEnum.UP, salutInfo.getEstatGlobal().getEstat());
        assertNotNull(salutInfo.getIntegracions());
        assertEquals(8, salutInfo.getIntegracions().size());
    }

    @Test
    public void testDeserializationWithProvidedJsonNotib() throws Exception {
        String json= "{\"codi\":\"NOT\",\"data\":{\"offset\":{\"totalSeconds\":3600,\"id\":\"+01:00\",\"rules\":{\"fixedOffset\":true,\"transitions\":[],\"transitionRules\":[]}},\"nano\":458677000,\"year\":2025,\"monthValue\":12,\"dayOfMonth\":22,\"hour\":13,\"minute\":42,\"second\":27,\"dayOfWeek\":\"MONDAY\",\"dayOfYear\":356,\"month\":\"DECEMBER\"},\"estatGlobal\":{\"estat\":\"UP\",\"latencia\":10},\"estatBaseDeDades\":{\"estat\":\"UP\",\"latencia\":0},\"integracions\":[{\"codi\":\"ARX\",\"peticions\":{\"totalOk\":0,\"totalError\":0,\"totalTempsMig\":0,\"peticionsOkUltimPeriode\":0,\"peticionsErrorUltimPeriode\":0,\"tempsMigUltimPeriode\":0,\"peticionsPerEntorn\":{}}},{\"estat\":\"UP\",\"latencia\":0,\"codi\":\"USR\",\"peticions\":{\"totalOk\":2,\"totalError\":0,\"totalTempsMig\":228,\"peticionsOkUltimPeriode\":0,\"peticionsErrorUltimPeriode\":0,\"tempsMigUltimPeriode\":0,\"peticionsPerEntorn\":{}}},{\"codi\":\"PFI\",\"peticions\":{\"totalOk\":0,\"totalError\":0,\"totalTempsMig\":0,\"peticionsOkUltimPeriode\":0,\"peticionsErrorUltimPeriode\":0,\"tempsMigUltimPeriode\":0,\"peticionsPerEntorn\":{}}},{\"codi\":\"VFI\",\"peticions\":{\"totalOk\":0,\"totalError\":0,\"totalTempsMig\":0,\"peticionsOkUltimPeriode\":0,\"peticionsErrorUltimPeriode\":0,\"tempsMigUltimPeriode\":0,\"peticionsPerEntorn\":{}}},{\"codi\":\"RSC\",\"peticions\":{\"totalOk\":0,\"totalError\":0,\"totalTempsMig\":0,\"peticionsOkUltimPeriode\":0,\"peticionsErrorUltimPeriode\":0,\"tempsMigUltimPeriode\":0,\"peticionsPerEntorn\":{}}},{\"codi\":\"REG\",\"peticions\":{\"totalOk\":0,\"totalError\":0,\"totalTempsMig\":0,\"peticionsOkUltimPeriode\":0,\"peticionsErrorUltimPeriode\":0,\"tempsMigUltimPeriode\":0,\"peticionsPerEntorn\":{}}},{\"codi\":\"DIR\",\"peticions\":{\"totalOk\":0,\"totalError\":0,\"totalTempsMig\":0,\"peticionsOkUltimPeriode\":0,\"peticionsErrorUltimPeriode\":0,\"tempsMigUltimPeriode\":0,\"peticionsPerEntorn\":{}}},{\"codi\":\"CAR\",\"peticions\":{\"totalOk\":0,\"totalError\":0,\"totalTempsMig\":0,\"peticionsOkUltimPeriode\":0,\"peticionsErrorUltimPeriode\":0,\"tempsMigUltimPeriode\":0,\"peticionsPerEntorn\":{}}},{\"codi\":\"CIE\",\"peticions\":{\"totalOk\":0,\"totalError\":0,\"totalTempsMig\":0,\"peticionsOkUltimPeriode\":0,\"peticionsErrorUltimPeriode\":0,\"tempsMigUltimPeriode\":0,\"peticionsPerEntorn\":{}}}],\"informacioSistema\":{\"processadors\":4,\"carregaSistema\":\"0,95\",\"memoriaTotal\":\"2,0 GB\",\"memoriaDisponible\":\"35,2 GB\",\"espaiDiscTotal\":\"86,7 GB\",\"espaiDiscLliure\":\"35,2 GB\",\"sistemaOperatiu\":\"Linux (3.10.0-957.10.1.el7.x86_64)\",\"dataArrencada\":\"22/12/2025 09:12\",\"tempsFuncionant\":\"0 dies, 04:29:48\"},\"versio\":\"2.0.12\",\"subsistemes\":[{\"estat\":\"UNKNOWN\",\"latencia\":0,\"codi\":\"AWE\",\"totalOk\":0,\"totalError\":0,\"totalTempsMig\":0,\"peticionsOkUltimPeriode\":0,\"peticionsErrorUltimPeriode\":0,\"tempsMigUltimPeriode\":0},{\"estat\":\"UNKNOWN\",\"latencia\":0,\"codi\":\"ARE\",\"totalOk\":0,\"totalError\":0,\"totalTempsMig\":0,\"peticionsOkUltimPeriode\":0,\"peticionsErrorUltimPeriode\":0,\"tempsMigUltimPeriode\":0},{\"estat\":\"UNKNOWN\",\"latencia\":0,\"codi\":\"MAS\",\"totalOk\":0,\"totalError\":0,\"totalTempsMig\":0,\"peticionsOkUltimPeriode\":0,\"peticionsErrorUltimPeriode\":0,\"tempsMigUltimPeriode\":0},{\"estat\":\"UNKNOWN\",\"latencia\":0,\"codi\":\"REG\",\"totalOk\":0,\"totalError\":0,\"totalTempsMig\":0,\"peticionsOkUltimPeriode\":0,\"peticionsErrorUltimPeriode\":0,\"tempsMigUltimPeriode\":0},{\"estat\":\"UNKNOWN\",\"latencia\":0,\"codi\":\"NOT\",\"totalOk\":0,\"totalError\":0,\"totalTempsMig\":0,\"peticionsOkUltimPeriode\":0,\"peticionsErrorUltimPeriode\":0,\"tempsMigUltimPeriode\":0},{\"estat\":\"UNKNOWN\",\"latencia\":0,\"codi\":\"CIE\",\"totalOk\":0,\"totalError\":0,\"totalTempsMig\":0,\"peticionsOkUltimPeriode\":0,\"peticionsErrorUltimPeriode\":0,\"tempsMigUltimPeriode\":0},{\"estat\":\"UNKNOWN\",\"latencia\":0,\"codi\":\"CSR\",\"totalOk\":0,\"totalError\":0,\"totalTempsMig\":0,\"peticionsOkUltimPeriode\":0,\"peticionsErrorUltimPeriode\":0,\"tempsMigUltimPeriode\":0},{\"estat\":\"UNKNOWN\",\"latencia\":0,\"codi\":\"CNT\",\"totalOk\":0,\"totalError\":0,\"totalTempsMig\":0,\"peticionsOkUltimPeriode\":0,\"peticionsErrorUltimPeriode\":0,\"tempsMigUltimPeriode\":0},{\"estat\":\"UNKNOWN\",\"latencia\":0,\"codi\":\"CCI\",\"totalOk\":0,\"totalError\":0,\"totalTempsMig\":0,\"peticionsOkUltimPeriode\":0,\"peticionsErrorUltimPeriode\":0,\"tempsMigUltimPeriode\":0},{\"estat\":\"UNKNOWN\",\"latencia\":0,\"codi\":\"GDO\",\"totalOk\":0,\"totalError\":0,\"totalTempsMig\":0,\"peticionsOkUltimPeriode\":0,\"peticionsErrorUltimPeriode\":0,\"tempsMigUltimPeriode\":0}]}";
        SalutInfo salutInfo = objectMapper.readValue(json, SalutInfo.class);

        assertNotNull(salutInfo);
        assertEquals("NOT", salutInfo.getCodi());
        assertNotNull(salutInfo.getData());
        assertEquals(2025, salutInfo.getData().getYear());
        assertEquals(12, salutInfo.getData().getMonthValue());
        assertEquals(22, salutInfo.getData().getDayOfMonth());
        assertEquals("2.0.12", salutInfo.getVersio());
        assertNotNull(salutInfo.getEstatGlobal());
        assertEquals(EstatSalutEnum.UP, salutInfo.getEstatGlobal().getEstat());
        assertNotNull(salutInfo.getIntegracions());
        assertEquals(9, salutInfo.getIntegracions().size());
    }

    @Test
    public void testDeserializationWithProvidedJsonRipea() throws Exception {
        String json= "{\"codi\":\"RIP\",\"data\":\"2025-12-22T14:05:02.899+01:00\",\"estatGlobal\":{\"estat\":\"UP\",\"latencia\":0},\"estatBaseDeDades\":{\"estat\":\"UP\",\"latencia\":0},\"integracions\":[{\"estat\":\"UNKNOWN\",\"latencia\":null,\"codi\":\"USR\",\"peticions\":{\"totalOk\":0,\"totalError\":0,\"totalTempsMig\":0,\"peticionsOkUltimPeriode\":0,\"peticionsErrorUltimPeriode\":0,\"tempsMigUltimPeriode\":0,\"endpoint\":\"\",\"peticionsPerEntorn\":{}}},{\"estat\":\"UNKNOWN\",\"latencia\":null,\"codi\":\"PFI\",\"peticions\":{\"totalOk\":0,\"totalError\":0,\"totalTempsMig\":0,\"peticionsOkUltimPeriode\":0,\"peticionsErrorUltimPeriode\":0,\"tempsMigUltimPeriode\":0,\"endpoint\":\"\",\"peticionsPerEntorn\":{}}},{\"estat\":\"UNKNOWN\",\"latencia\":null,\"codi\":\"ARX\",\"peticions\":{\"totalOk\":0,\"totalError\":0,\"totalTempsMig\":0,\"peticionsOkUltimPeriode\":0,\"peticionsErrorUltimPeriode\":0,\"tempsMigUltimPeriode\":0,\"endpoint\":\"\",\"peticionsPerEntorn\":{}}},{\"estat\":\"UNKNOWN\",\"latencia\":null,\"codi\":\"PBL\",\"peticions\":{\"totalOk\":0,\"totalError\":0,\"totalTempsMig\":0,\"peticionsOkUltimPeriode\":0,\"peticionsErrorUltimPeriode\":0,\"tempsMigUltimPeriode\":0,\"endpoint\":\"\",\"peticionsPerEntorn\":{}}},{\"estat\":\"UNKNOWN\",\"latencia\":null,\"codi\":\"DIS\",\"peticions\":{\"totalOk\":0,\"totalError\":0,\"totalTempsMig\":0,\"peticionsOkUltimPeriode\":0,\"peticionsErrorUltimPeriode\":0,\"tempsMigUltimPeriode\":0,\"endpoint\":\"\",\"peticionsPerEntorn\":{}}},{\"estat\":\"UNKNOWN\",\"latencia\":null,\"codi\":\"CDO\",\"peticions\":{\"totalOk\":0,\"totalError\":0,\"totalTempsMig\":0,\"peticionsOkUltimPeriode\":0,\"peticionsErrorUltimPeriode\":0,\"tempsMigUltimPeriode\":0,\"endpoint\":\"\",\"peticionsPerEntorn\":{}}},{\"estat\":\"UNKNOWN\",\"latencia\":null,\"codi\":\"DIR\",\"peticions\":{\"totalOk\":0,\"totalError\":0,\"totalTempsMig\":0,\"peticionsOkUltimPeriode\":0,\"peticionsErrorUltimPeriode\":0,\"tempsMigUltimPeriode\":0,\"endpoint\":\"\",\"peticionsPerEntorn\":{}}},{\"estat\":\"UNKNOWN\",\"latencia\":null,\"codi\":\"NOT\",\"peticions\":{\"totalOk\":0,\"totalError\":0,\"totalTempsMig\":0,\"peticionsOkUltimPeriode\":0,\"peticionsErrorUltimPeriode\":0,\"tempsMigUltimPeriode\":0,\"endpoint\":\"\",\"peticionsPerEntorn\":{}}},{\"estat\":\"UNKNOWN\",\"latencia\":null,\"codi\":\"DIB\",\"peticions\":{\"totalOk\":0,\"totalError\":0,\"totalTempsMig\":0,\"peticionsOkUltimPeriode\":0,\"peticionsErrorUltimPeriode\":0,\"tempsMigUltimPeriode\":0,\"endpoint\":\"\",\"peticionsPerEntorn\":{}}},{\"estat\":\"UNKNOWN\",\"latencia\":null,\"codi\":\"VFI\",\"peticions\":{\"totalOk\":0,\"totalError\":0,\"totalTempsMig\":0,\"peticionsOkUltimPeriode\":0,\"peticionsErrorUltimPeriode\":0,\"tempsMigUltimPeriode\":0,\"endpoint\":\"\",\"peticionsPerEntorn\":{}}},{\"estat\":\"UNKNOWN\",\"latencia\":null,\"codi\":\"RSC\",\"peticions\":{\"totalOk\":0,\"totalError\":0,\"totalTempsMig\":0,\"peticionsOkUltimPeriode\":0,\"peticionsErrorUltimPeriode\":0,\"tempsMigUltimPeriode\":0,\"endpoint\":\"\",\"peticionsPerEntorn\":{}}}],\"informacioSistema\":{\"processadors\":4,\"carregaSistema\":\"0,12\",\"cpuSistema\":null,\"memoriaTotal\":\"2,0 GB\",\"memoriaDisponible\":\"35,2 GB\",\"espaiDiscTotal\":\"86,7 GB\",\"espaiDiscLliure\":\"35,2 GB\",\"sistemaOperatiu\":\"Linux (3.10.0-957.10.1.el7.x86_64)\",\"dataArrencada\":\"22/12/2025 09:12\",\"tempsFuncionant\":\"0 dies, 04:52:23\"},\"missatges\":[{\"data\":\"2022-05-10\",\"nivell\":\"WARN\",\"missatge\":\"Avis Usuari. Entitat null. Assumpte: Aquest entorn de desenvolupament (DEV) no està operatiu per desenvolupadors de procediments (OBRIR MISSATGE): Els desenvolupaments de procediments i les proves amb expedients s'han de realitzar en l'entorn de serveis estables (SE) accesible des de l'adreça <a href=\\\"https://se.caib.es/ripea/\\\" target=\\\"_blank\\\">https://se.caib.es/ripea/</a>. Aquest entorn de SE està obert des d'Internet i sempre tindrà la mateixa versió que l'entorn de producció. L'entorn de DEV només està disponible pels tècnics de la DGMAD i pels desenvolupadors de RIPEA per testetjar les eines d'administració electrònica.\"},{\"data\":\"2022-05-10\",\"nivell\":\"WARN\",\"missatge\":\"Avis Admin. Entitat null. Assumpte: Aquest entorn de desenvolupament (DEV) no està operatiu per desenvolupadors de procediments (OBRIR MISSATGE): Els desenvolupaments de procediments i les proves amb expedients s'han de realitzar en l'entorn de serveis estables (SE) accesible des de l'adreça <a href=\\\"https://se.caib.es/ripea/\\\" target=\\\"_blank\\\">https://se.caib.es/ripea/</a>. Aquest entorn de SE està obert des d'Internet i sempre tindrà la mateixa versió que l'entorn de producció. L'entorn de DEV només està disponible pels tècnics de la DGMAD i pels desenvolupadors de RIPEA per testetjar les eines d'administració electrònica.\"},{\"data\":\"2022-05-10\",\"nivell\":\"WARN\",\"missatge\":\"Avis Admin. Entitat null. Assumpte: Aquest entorn de desenvolupament (DEV) no està operatiu per desenvolupadors de procediments (OBRIR MISSATGE): Els desenvolupaments de procediments i les proves amb expedients s'han de realitzar en l'entorn de serveis estables (SE) accesible des de l'adreça <a href=\\\"https://se.caib.es/ripea/\\\" target=\\\"_blank\\\">https://se.caib.es/ripea/</a>. Aquest entorn de SE està obert des d'Internet i sempre tindrà la mateixa versió que l'entorn de producció. L'entorn de DEV només està disponible pels tècnics de la DGMAD i pels desenvolupadors de RIPEA per testetjar les eines d'administració electrònica.\"},{\"data\":\"2022-05-10\",\"nivell\":\"WARN\",\"missatge\":\"Avis Admin. Entitat null. Assumpte: Aquest entorn de desenvolupament (DEV) no està operatiu per desenvolupadors de procediments (OBRIR MISSATGE): Els desenvolupaments de procediments i les proves amb expedients s'han de realitzar en l'entorn de serveis estables (SE) accesible des de l'adreça <a href=\\\"https://se.caib.es/ripea/\\\" target=\\\"_blank\\\">https://se.caib.es/ripea/</a>. Aquest entorn de SE està obert des d'Internet i sempre tindrà la mateixa versió que l'entorn de producció. L'entorn de DEV només està disponible pels tècnics de la DGMAD i pels desenvolupadors de RIPEA per testetjar les eines d'administració electrònica.\"}],\"versio\":\"1.0.3\",\"subsistemes\":[{\"estat\":\"UP\",\"latencia\":null,\"codi\":\"SUB_EXP\",\"totalOk\":0,\"totalError\":0,\"totalTempsMig\":0,\"peticionsOkUltimPeriode\":0,\"peticionsErrorUltimPeriode\":0,\"tempsMigUltimPeriode\":0},{\"estat\":\"UP\",\"latencia\":null,\"codi\":\"SUB_PRC\",\"totalOk\":0,\"totalError\":0,\"totalTempsMig\":0,\"peticionsOkUltimPeriode\":0,\"peticionsErrorUltimPeriode\":0,\"tempsMigUltimPeriode\":0},{\"estat\":\"UP\",\"latencia\":null,\"codi\":\"SUB_MAS\",\"totalOk\":0,\"totalError\":0,\"totalTempsMig\":0,\"peticionsOkUltimPeriode\":0,\"peticionsErrorUltimPeriode\":0,\"tempsMigUltimPeriode\":0},{\"estat\":\"UP\",\"latencia\":null,\"codi\":\"SUB_GDO\",\"totalOk\":0,\"totalError\":0,\"totalTempsMig\":0,\"peticionsOkUltimPeriode\":0,\"peticionsErrorUltimPeriode\":0,\"tempsMigUltimPeriode\":0},{\"estat\":\"UP\",\"latencia\":null,\"codi\":\"SUB_CDI\",\"totalOk\":0,\"totalError\":0,\"totalTempsMig\":0,\"peticionsOkUltimPeriode\":0,\"peticionsErrorUltimPeriode\":0,\"tempsMigUltimPeriode\":0},{\"estat\":\"UP\",\"latencia\":null,\"codi\":\"SUB_CNB\",\"totalOk\":0,\"totalError\":0,\"totalTempsMig\":0,\"peticionsOkUltimPeriode\":0,\"peticionsErrorUltimPeriode\":0,\"tempsMigUltimPeriode\":0},{\"estat\":\"UP\",\"latencia\":null,\"codi\":\"SUB_CPF\",\"totalOk\":0,\"totalError\":0,\"totalTempsMig\":0,\"peticionsOkUltimPeriode\":0,\"peticionsErrorUltimPeriode\":0,\"tempsMigUltimPeriode\":0}]}";
        SalutInfo salutInfo = objectMapper.readValue(json, SalutInfo.class);

        assertNotNull(salutInfo);
        assertEquals("RIP", salutInfo.getCodi());
        assertNotNull(salutInfo.getData());
        assertEquals(2025, salutInfo.getData().getYear());
        assertEquals(12, salutInfo.getData().getMonthValue());
        assertEquals(22, salutInfo.getData().getDayOfMonth());
        assertEquals("1.0.3", salutInfo.getVersio());
        assertNotNull(salutInfo.getEstatGlobal());
        assertEquals(EstatSalutEnum.UP, salutInfo.getEstatGlobal().getEstat());
        assertNotNull(salutInfo.getIntegracions());
        assertEquals(11, salutInfo.getIntegracions().size());
    }
}
