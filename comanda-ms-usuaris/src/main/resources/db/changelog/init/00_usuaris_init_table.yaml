databaseChangeLog:
- changeSet:
    id: usuaris-init-table-1
    author: limit
    changes:
    - createTable:
        tableName: ${db_prefix}usuari
        columns:
        - column:
            constraints:
                nullable: false
                primaryKey: true
                primaryKeyName: ${db_prefix}usuari_pk
            name: id
            type: BIGINT
            autoIncrement: true
        - column:
            constraints:
                nullable: false
            name: codi
            type: VARCHAR(64 ${varcharUnit})
        - column:
            constraints:
                nullable: false
            name: nom
            type: VARCHAR(255 ${varcharUnit})
        - column:
            name: nif
            type: VARCHAR(10 ${varcharUnit})
        - column:
            name: email
            type: VARCHAR(255 ${varcharUnit})
        - column:
              constraints:
                  nullable: false
              name: created_by
              type: VARCHAR(64 ${varcharUnit})
        - column:
              constraints:
                  nullable: false
              name: created_date
              type: TIMESTAMP
        - column:
              name: lastmod_by
              type: VARCHAR(64 ${varcharUnit})
        - column:
              name: lastmod_date
              type: TIMESTAMP
        - column:
              name: v
              type: BIGINT
- changeSet:
    id: usuaris-init-table-2
    author: límit
    changes:
      - addColumn:
          tableName: ${db_prefix}usuari
          columns:
            - column:
                name: email_alternatiu
                type: VARCHAR(200 ${varcharUnit})
                remarks: Dirección de correo electrónico alternativo del usuario
      - addColumn:
          tableName: ${db_prefix}usuari
          columns:
            - column:
                name: idioma
                type: VARCHAR(2 ${varcharUnit})
                defaultValue: CA
                constraints:
                  nullable: false
                remarks: Idioma del usuario
      - addColumn:
          tableName: ${db_prefix}usuari
          columns:
            - column:
                name: num_elements_pagina
                type: VARCHAR(12 ${varcharUnit})
                defaultValue: AUTOMATIC
                constraints:
                  nullable: false
                remarks: Número de elementos por página
- changeSet:
    id: usuaris-init-table-3
    author: límit
    changes:
      - addColumn:
          tableName: ${db_prefix}usuari
          columns:
            - column:
                name: alarma_mail
                type: BOOLEAN
            - column:
                name: alarma_mail_agrupar
                type: BOOLEAN
      - update:
          tableName: ${db_prefix}usuari
          columns:
            - column:
                name: alarma_mail
                valueBoolean: false
            - column:
                name: alarma_mail_agrupar
                valueBoolean: false
      - addNotNullConstraint:
          tableName: ${db_prefix}usuari
          columnName: alarma_mail
      - addNotNullConstraint:
          tableName: ${db_prefix}usuari
          columnName: alarma_mail_agrupar