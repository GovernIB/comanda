databaseChangeLog:
- changeSet:
    id: acl-init-synonyms-1
    author: limit
    preConditions:
      - dbms:
          type: oracle
    changes:
      - sql:
          splitStatements: true
          sql: |
            -- Synonyms to expose unprefixed Spring ACL table names in Oracle
            CREATE OR REPLACE SYNONYM acl_class FOR ${db_prefix}acl_class;
            CREATE OR REPLACE SYNONYM acl_sid FOR ${db_prefix}acl_sid;
            CREATE OR REPLACE SYNONYM acl_object_identity FOR ${db_prefix}acl_object_identity;
            CREATE OR REPLACE SYNONYM acl_entry FOR ${db_prefix}acl_entry;
- changeSet:
    id: acl-init-synonyms-2
    author: limit
    preConditions:
      - dbms:
          type: postgresql
    changes:
      - createView:
          viewName: acl_class
          fullDefinition: true
          replaceIfExists: true
          selectQuery: |
            SELECT * FROM ${db_prefix}acl_class
      - createView:
          viewName: acl_sid
          fullDefinition: true
          replaceIfExists: true
          selectQuery: |
            SELECT * FROM ${db_prefix}acl_sid
      - createView:
          viewName: acl_object_identity
          fullDefinition: true
          replaceIfExists: true
          selectQuery: |
            SELECT * FROM ${db_prefix}acl_object_identity
      - createView:
          viewName: acl_entry
          fullDefinition: true
          replaceIfExists: true
          selectQuery: |
            SELECT * FROM ${db_prefix}acl_entry
